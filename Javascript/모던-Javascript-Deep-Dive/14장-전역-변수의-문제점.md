# 14장 전역 변수의 문제점

## 14.1 변수의 생명 주기

### 14.1.1 지역 변수의 생명 주기

- 지역 변수의 생명 주기는 함수의 생명 주기와 일치한다.

```javascript
var x = "global";

function foo() {
  console.log(x); // undefined (지역 변수가 선언만 된 상태)
  var x = "local";
  return x;
}

foo();
console.log(x); // 'global'
```

- 함수가 호출되면 (선언이 아니다!) 가장 먼저 함수 내에서 쓰이는 변수들을 호이스팅한 뒤 할당문을 만나면 변수에 값을 할당한다.
- 함수가 종료되면 함수 내 지역 변수들은 소멸된다.
- 함수 내부에서 선언된 지역 변수는 함수가 생성한 스코프에 등록된다. 따라서 변수는 자기가 등록된 스코프가 소멸(메모리 해제)될 때까지 유효하다. 할당된 메모리 공간은 더 이상 그 누구도 참조하지 않을 때 가비지 콜렉터에 의해 해제되어 가용 메모리 풀로 반환된다.
  - 누군가가 메모리 공간을 참조하고 있으면 해제되지 않고 확보된 상태로 남아 있음 -> 클로저
  - **호이스팅은 스코프 단위로 동작한다.**
  - 호이스팅은 변수 선언이 스코프의 선두로 끌어 올려진 것처럼 동작하는 자바스크립트 고유의 특징이다. 그동안 모든 변수가 다 끌어 올려지는 것처럼 보였던 건, 전역 변수들이었기 때문.
