# 모르는 용어 정리

## 배포 전체 흐름도

![흐름도](https://user-images.githubusercontent.com/25563077/177357684-0911038c-d484-482f-b99f-a7dbc507a45b.png)

## 배포(Deploy) 란?

- 로컬 PC에서 프로그램을 열심히 만들고 나면, 서버에 코드를 반영해야 사용자들이 서비스를 직접 이용할 수 있게 됩니다. 이렇게 서버에 코드를 반영하는 과정을 `배포`라고 합니다.

### 컴파일, 빌드, 배포? 많이 들어는 봤는데 잘 모르겠어요.

- **컴파일(Compile)**: 개발자가 작성한 소스코드를 바이너리(컴퓨터가 이해할 수 있는 기계어)로 변환하는 작업
- **빌드(Build)**: 소스코드 파일을 실행 가능한 소프트웨어 산출물로 만드는 일련의 과정. 빌드 과정을 도와주는 도구를 빌드 툴(Build Tool)이라고 하며, `Ant`, `Maven`, `Gradle` 등이 있다.
- **배포(Deploy)**: 빌드가 완성된 실행 가능한 파일을 사용자가 접근할 수 있는 환경에 배치시키는 일

- 컴파일부터 빌드, 혹은 경우에 따라 배포 과정까지도 `빌드한다` 로 표현하기도 합니다.

## CI/CD

### **CI (지속적 통합, Continuous Integration)**

- `빌드/테스트를 자동화` 하는 것
- 개발자가 커밋할 때마다 빌드와 자동 테스트가 이루어져 테스트가 통과된 코드만 공용 레포지토리에 반영됩니다.
- 커밋할 때마다 빌드, 테스트 과정에 소요되는 시간을 줄여 생산성을 높일 수 있습니다.
- 테스트가 통과된 코드들이 레포지토리에 반영되기 때문에 코드 품질이 좋아집니다.

### **CD (지속적 배포 Continuous Deployment 또는 지속적 서비스 제공 Continuous Delivery)**

- CI 과정에서 오류 없이 코드가 통과되었다면, `해당 변경사항이 프로덕션에 자동으로 반영되고 자동으로 배포됩니다`.
- CI/CD 환경이 구축되면 간단한 변경 사항을 하루에도 몇 번씩 배포할 수 있어요!

![CICD](https://user-images.githubusercontent.com/25563077/177357610-3012bb72-9d29-4dde-a92a-1e5c9c4eba8f.png)

- `Jenkins`, `CircleCI`, `TravisCI`, `Github Actions` 등을 사용하며, 곧 `Jenkins`를 사용한 자동 배포를 해 보겠습니다.

## DevOps

- 개발(development)과 운영(operation)의 합성어로, 어떤 기술이 아닌 **소프트웨어 개발 방법론 중 하나**
- 기존에는 개발팀과 운영팀이 나뉘어져 있어 서로 의사소통하기 불편한 문제가 있었는데요. 그러다 보니 프로그램의 배포, 테스트 및 안정화 작업에 비효율을 초래하기도 했습니다.
- 개발팀과 운영팀은 고객에게 제공하는 서비스의 품질을 향상하기 위해 하나가 되어 소통하고, 효율성을 높이며 최선을 다합니다.

### **특징들**

- Cross Functional Team: 하나의 팀에서 서비스 기획부터 배포, 테스트까지의 모든 제품 개발 프로세스를 수행합니다.
- Widely Shared Metrics: 팀원 모두가 `우리 서비스가 잘 돌아가고 있구나`, `이 부분은 좀 부족하구나` 처럼 서비스가 운영에서 잘 돌아갈 수 있는 하나의 공유 지표가 있어야 합니다.
- Automating repetitive tasks: 반복적인 작업들은 CI/CD를 이용해서 프로세스를 자동화하고, 남는 시간을 생산적으로 사용하여 고도화된 서비스를 제작합니다.
- Post Mortems: 장애나 이슈가 있을 때 혼자만 알지 말고 다른 팀원들과 공유합니다.
- Regular Release: 짧은 주기의 정기 배포를 통해 빠르게 서비스의 기능을 개선하고 고객들의 요구사항을 반영해 나갑니다.

## Amazon EC2

- Amazon Elastic Compute Cloud(Amazon EC2)는 Amazon Web Service에서 제공하는 서비스 중 하나로, **AWS 클라우드 상에서 가상 서버를 구축**하는 것을 말합니다.
  - Amazon Web Service: 아마존에서 제공하는 웹 클라우드 컴퓨팅 서비스
- EC2에서 사용하는 가상 서버의 단위를 `인스턴스` 라고 합니다. Linux, Windows를 비롯한 다양한 OS를 사용하여 가상 서버를 구축할 수 있습니다.

### **클라우드 상에서 가상 서버를 구축하면 어떤 이점이 있나요?**

- **업무 효율성 & 비용 절감**: 하드웨어를 직접 사서 물리적인 서버를 구축할 때보다 비용이 적게 듭니다. 뿐만 아니라 서버 증설, 복제, 삭제 등의 작업도 클릭 몇 번만 하면 몇 분만에 적용되므로 빠르고 효율적인 작업이 가능합니다.
- **유연함**: 사용자가 원하는 스펙과 과금 정책을 고를 수 있습니다.
- **보안**: 키 페어를 사용하여 인스턴스 로그인 정보를 보호할 수 있습니다. (AWS는 퍼블릭 키, 사용자는 개인 키를 보관하는 방식) 또, 인스턴스에 연결할 수 있는 프로토콜, 포트, 소스 IP 범위를 지정하는 방화벽 기능을 제공합니다.
- 가장 널리 쓰이는 Linux 배포판 중 하나인 Ubuntu로 EC2 서버를 구축해 보겠습니다.

## PuTTY & mobaXterm

- PuTTY: 서버에 원격으로 접속할 수 있도록 도와주는 SSH/Telnet GUI 클라이언트
- mobaXterm: PuTTY의 확장판이라고 생각하면 편하다. 제공하는 기능도 더 많고 사용도 편리하므로 mobaXterm을 사용해 보겠습니다.
- SSAFY에서 지급받은 `.pem` 키를 사용하여 EC2 서버에 원격으로 접속할 수 있습니다.

### Nginx

- 가벼움과 높은 성능을 목표로 하는 웹 서버 소프트웨어
- 웹 서버와 웹 애플리케이션 서버
  - 웹 서버(Web Server): 웹 브라우저와 같은 클라이언트로부터 HTTP 요청을 받아들이고, 그림, CSS, 자바스크립트를 포함한 정적인 HTML 문서를 클라이언트로 전달합니다.
  - 웹 애플리케이션 서버(Web Application Server, WAS): 프로그램 실행 환경과 데이터베이스 접속 기능을 제공하며, 여러 개의 트랜잭션을 관리합니다. 업무를 처리하는 비즈니스 로직을 수행합니다.
  - 클라이언트가 요청을 보내면 웹 서버는 해당 요청을 분석합니다. 정적 페이지만 필요하면 바로 응답할 수 있고, 만약 데이터베이스에 접근해야 한다면 웹 애플리케이션 서버에 요청해서 결과를 받아와 클라이언트에게 응답합니다.
  - 왜 굳이 둘을 구분해야 할까요?
    - 리버스 프록시(Reverse Proxy)를 통한 보안 강화: 프록시 서버를 사용하면 서버는 사용자의 정보를 알기 어렵습니다. 리버스 프록시는 이와 반대로, 웹 서버가 리버스 프록시 서버가 되어 사용자가 어떤 서버로 요청을 보냈는지 알 수 없습니다.
    - 로드 밸런싱: 서버에 가해지는 부하를 분산할 수 있습니다. 하나의 서버를 사용할 때는 모든 요청을 서버 하나에서 처리하므로 부담이 가지만, 여러 대의 서버를 둠으로써 가장 부하가 적은 서버로 응답을 요청할 수 있습니다.
- VS Apache
  - Apache는 오랫동안 사용되었기 때문에 프로그램의 안정성이 좋습니다. 하지만 스레드/프로세스 기반이라 요청 당 스레드를 새로 만들어 처리하기 때문에, 사용자가 늘어나면 CPU와 메모리의 성능이 저하될 수 있습니다.
  - Nginx는 비동기 이벤트 기반으로 요청을 처리합니다. 이벤트가 트리거되면 해당 요청을 처리하므로 Apache보다 가볍고 높은 성능을 자랑합니다.

## Docker

- **오픈 소스 컨테이너화 플랫폼**
- 개발자는 애플리케이션을 컨테이너라는 단위로 패키징할 수 있다.
- Docker를 사용하지 않고도 컨테이너를 구축할 수 있지만, Docker를 이용하면 쉽고 간편하고 안전하게 컨테이너를 빌드, 배치, 관리할 수 있습니다.

### 컨테이너란 무엇이고 왜 쓸까?

- 컨테이너: 애플리케이션 코드가 해당 라이브러리 및 종속 항목과 패키징되어 있는 소프트웨어 실행 유닛. 컨테이너를 사용하면 데스크탑, 클라우드 등 환경에 구애받지 않고 어디서나 동일하게 실행됩니다.

![컨테이너와-가상머신](https://user-images.githubusercontent.com/25563077/177578179-5171f507-3784-4bc4-8cd0-3444883347da.png)

- 많이 비교되는 개념 중에는 가상 머신(Virtual Machine)이 있는데요. 가상 머신을 사용하면 Windows 위에서 Linux 운영 체제를 실행하는 등, 컴퓨터 시스템을 소프트웨어에서 구동할 수 있게 됩니다. Hypervisor 위에 가상 머신(인스턴스)이 올라가고, 가상 머신 안에는 OS, 라이브러리, 애플리케이션이 탑재됩니다.
- 컨테이너는 가상 머신과 유사하지만 OS가 포함되지 않습니다. 용량도 줄어들고 대신 Host OS를 사용하게 되어 속도도 더 빨라졌습니다. 단점이라면 Host OS를 사용하기 때문에 각 인스턴스마다 가상 머신처럼 다른 OS를 구동하는 건 불가능하다는 점입니다.
- 컨테이너는 경량화되어 간편하고, 애플리케이션에 종속적인 요소들도 포함하고 있으므로 플랫폼 독립적이며 이식성이 뛰어납니다. 마이크로서비스 아키텍처도 허용하므로 애플리케이션을 배치, 확장하는 데에도 편리합니다.

### 관련 용어

- DockerFile
  - Docker 이미지 작성 프로세스를 자동화한 파일
  - Docker 엔진이 이미지를 만들기 위해 실행할 CLI 명령어의 목록입니다.
- Docker 이미지
  - Docker 이미지에는 실행 가능한 애플리케이션 소스 코드, 애플리케이션 코드가 컨테이너로서 실행해야 하는 모든 툴, 라이브러리 및 종속 항목들이 포함되어 있습니다.
  - 우리가 생각하는 평범한 이미지 파일(.jpg, .png 등)이 아닌, 애플리케이션을 실행하는 데 있어서 필요한 설정들을 모아놓은 파일입니다. 이미지 파일만 가지고 있으면 Docker를 사용하여 환경에 종속되지 않고 애플리케이션을 실행할 수 있습니다.
  - 버전이 있어서 버전 관리와 롤백이 가능합니다.
- Docker 허브
  - 컨테이너 이미지를 보유하고 공유하는 가장 크고 대중화된 커뮤니티.
  - 사용자는 Docker 허브에서 원하는 이미지를 검색하여 다운로드받을 수 있고, 자신의 이미지를 공유할 수도 있습니다.
  - Docker버전의 NPM이라고 생각하면 편할 듯해요. [https://www.npmjs.com/](https://www.npmjs.com/)

### 오케스트레이션 툴

- 만약 Docker로 수천 개의 컨테이너와 수백 개의 서비스를 실행한다면 어떻게 될까요? 각 컨테이너의 관리, 흐름을 파악하는 일이 어렵겠지요. 컨테이너 오케스트레이션 툴은 이렇게 다수의 컨테이너들을 관리하는 전용 도구입니다.
- docker-compose
  - 모두 동일한 호스트에 상주하는 다중 컨테이너 프로세스에서 애플리케이션을 빌드하는 경우에 사용합니다.
  - 애플리케이션에 포함되는 서비스를 지정하는 YAML 파일을 작성할 수 있으며, 단일 명령으로 컨테이너를 배치하고 실행할 수 있습니다.
- Kubernetes
  - Google에서 내부용으로 개발된 프로젝트에서 파생된 오픈 소스 컨테이너 오케스트레이션 플랫폼입니다. Docker 내부에도 Docker Swarm이라는 컨테이너 오케스트레이션 툴이 있지만 다들 Kubernetes를 사용하는 추세입니다.
  - 컨테이너 배치, 업데이트, 서비스 감지, 스토리지 프로비저닝, 로드 밸런싱, 상태 모니터링을 포함하여 컨테이너 기반 아키텍처의 관리에 필수적인 태스크를 스케줄링하고 자동화합니다.
